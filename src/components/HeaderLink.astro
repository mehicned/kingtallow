---
import type { HTMLAttributes } from 'astro/types';
import { cn } from '../lib/utils';

type Props = HTMLAttributes<'a'>;

const { href, class: className, ...props } = Astro.props;
const pathname = Astro.url.pathname.replace(import.meta.env.BASE_URL, '');
const subpath = pathname.match(/[^\/]+/g);
const isActive = href === pathname || href === '/' + (subpath?.[0] || '');
const baseClasses =
	'rounded-full px-3.5 py-1.5 text-sm font-semibold transition-colors duration-200 border border-transparent';
const activeClasses =
	'bg-primary text-primary-foreground shadow-soft border-primary/60 ring-1 ring-primary/30';
const inactiveClasses = 'text-foreground/70 hover:text-foreground bg-muted/60 hover:border-primary/30';
const computedClass = cn(baseClasses, isActive ? activeClasses : inactiveClasses, className as string);
---

<a href={href} class={computedClass} aria-current={isActive ? 'page' : undefined} {...props}>
	<slot />
</a>
